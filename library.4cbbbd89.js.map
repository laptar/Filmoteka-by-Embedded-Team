{"mappings":"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","sources":["src/js/modal.js"],"sourcesContent":["function renderModal(event, nameStor) {\n  const refs = {\n    openModalBtn: document.querySelector('[data-modal-open]'),\n    modal: document.querySelector('[data-modal]'),\n    info: document.querySelector('.modal'),\n    body: document.querySelector('body'),\n  };\n  refs.body.classList.add('body-fixed');\n  // refs.openModalBtn.addEventListener('click', toggleModalOpen);\n  // function toggleModalOpen(event) {\n  if (event.target.nodeName === 'IMG') {\n    const arr = JSON.parse(localStorage.getItem(nameStor));\n    const currentMovie = arr.find(\n      curentId => String(curentId.id) === event.target.id\n    );\n    console.log(currentMovie);\n\n    // Додаємо дві змінні 2 обєкта які беремо із локал сторадж, потім кожен розпрсимо, і кожен файндом перебиремо, якщо фільм доданий то в шаблонку вставляємо тернарнік, і міняємо ADD /remuv\n    let watched = localStorage.getItem('watched')\n      ? JSON.parse(localStorage.getItem('watched'))\n      : [];\n\n    let queue = localStorage.getItem('queue')\n      ? JSON.parse(localStorage.getItem('queue'))\n      : [];\n    const isInWatched = watched.some(\n      item => String(item.id) === event.target.id\n    );\n    const isInQueue = queue.some(item => String(item.id) === event.target.id);\n    console.log(isInWatched);\n    console.log(isInQueue);\n    const modalRender = `\n      <button type=\"button\" class=\"modal__button-close\" data-modal-close></button>\n    <div class=\"modal__image\">\n      <img\n        src = \"https://image.tmdb.org/t/p/w500/${currentMovie.poster_path}\"\n        alt=\"${currentMovie.title}\"\n           />\n    </div>\n    <div class=\"modal-info\">\n      <h1 class=\"modal__title\">${currentMovie.title}</h1>\n      <table class=\"modale_table\">\n        <tbody class=\"modale_table\">\n          <tr class=\"modale_table-row\">\n            <td class=\"modale__table-name\">Vote/Votes</td>\n            <td class=\"modale__table-about\">\n              <span class=\"vote\">${currentMovie.vote_average}</span>\n              <span class=\"modale__table-name\">/</span>${\n                currentMovie.vote_count\n              }\n            </td>\n          </tr>\n          <tr class=\"modale__table-row\">\n            <td class=\"modale__table-name\">Popularity</td>\n            <td class=\"modale__table-about\">${currentMovie.popularity}\n            </td>\n          </tr>\n          <tr class=\"modale__table-row\">\n            <td class=\"modale__table-name\">Original Title</td>\n            <td class=\"modale__table-about\">${currentMovie.title}</td>\n          </tr>\n          <tr class=\"modale__table-row\">\n            <td class=\"modale__table-name\">Genre</td>\n            <td class=\"modale__table-about\">${currentMovie.genre_ids.join(\n              ', '\n            )}</td>\n          </tr>\n        </tbody>\n      </table>\n      <h2 class=\"modal__about-title\">About</h2>\n      <p class=\"modal__about-text\">${currentMovie.overview}</p>\n      <div class=\"buttons\">\n        <button\n          type=\"button\"\n          class=\"modal__button-watched modal__button-text\"\n        >${isInWatched ? 'REMUVE WATCH' : 'add to watched'}\n          \n        </button>\n        <button type=\"button\" class=\"modal__button-queue modal__button-text\">\n        ${isInQueue ? 'REMUVE QUEUE' : 'add to queue'}\n          \n        </button>\n      </div>\n    </div>`;\n    refs.info.insertAdjacentHTML('beforeend', modalRender);\n    refs.modal.classList.remove('is-hidden');\n\n    const closeModalBtn = document.querySelector('[data-modal-close]');\n    // console.log(closeModalBtn);\n    closeModalBtn.addEventListener('click', toggleModal);\n    // Змінні кнопок модалки\n    const watchedBtn = document.querySelector('.modal__button-watched');\n    const queueBtn = document.querySelector('.modal__button-queue');\n    // Провірка чи є щось в локал сторедж\n    //----\n    // Кнопка додавання та видалення з вотч\n    const idInW = String(watched.map(el => el.id));\n    if (idInW.includes(event.target.id)) {\n      console.log(event.target.id);\n      watchedBtn.addEventListener('click', remuveWatch);\n      function remuveWatch() {\n        watched = watched.filter(el => String(el.id) !== event.target.id);\n        localStorage.setItem('watched', JSON.stringify(watched));\n        cangeNameAddWatch();\n      }\n    } else {\n      watchedBtn.addEventListener('click', addToWatchList);\n      function addToWatchList() {\n        if (!watched.find(item => item.id === currentMovie.id)) {\n          watched.push(currentMovie);\n          localStorage.setItem('watched', JSON.stringify(watched));\n          cangeNameRemWatch();\n          // toggleModal();\n          // watchedBtn.disabled = true;\n        }\n      }\n    }\n    // ----\n    // Кнопка додавання та видалення з кювеє\n    const idInQ = String(queue.map(el => el.id));\n    console.log(idInQ);\n    if (idInQ.includes(event.target.id)) {\n      queueBtn.addEventListener('click', remuveQueue);\n      function remuveQueue() {\n        queue = queue.filter(el => String(el.id) !== event.target.id);\n        localStorage.setItem('queue', JSON.stringify(queue));\n        cangeNameAddQueue();\n        // queueBtn.disabled = true;\n        // toggleModal();\n      }\n    } else {\n      queueBtn.addEventListener('click', addToQueueList);\n      function addToQueueList() {\n        if (!queue.find(item => item.id === currentMovie.id)) {\n          queue.push(currentMovie);\n          localStorage.setItem('queue', JSON.stringify(queue));\n          cangeNameRemQueue();\n          // queueBtn.disabled = true;\n        }\n      }\n    }\n\n    // ----\n    document.addEventListener('keydown', ev => {\n      refs.body.classList.remove('body-fixed');\n      refs.modal.classList.add('is-hidden');\n      refs.info.innerHTML = '';\n    });\n    refs.modal.addEventListener('mousedown', evt => {\n      refs.body.classList.remove('body-fixed');\n      if (evt.target.nodeName === 'SECTION') {\n        refs.modal.classList.add('is-hidden');\n        refs.info.innerHTML = '';\n      }\n    });\n    function cangeNameRemWatch() {\n      console.log('міняю');\n      watchedBtn.textContent = 'REMUVE WATCH';\n      watchedBtn.classList.add('disable');\n      watchedBtn.disabled = true;\n    }\n    function cangeNameRemQueue() {\n      console.log('міняюQue');\n      queueBtn.textContent = 'REMUVE QUEUE';\n      queueBtn.classList.add('disable');\n      queueBtn.disabled = true;\n    }\n    function cangeNameAddQueue() {\n      console.log('міняюADDQue');\n      queueBtn.textContent = 'ADD TO QUEUE';\n      queueBtn.classList.add('accent');\n      queueBtn.disabled = true;\n    }\n    function cangeNameAddWatch() {\n      console.log('міняюADDQue');\n      watchedBtn.textContent = 'ADD TO WATCHED';\n      watchedBtn.classList.add('accent');\n      watchedBtn.disabled = true;\n    }\n  }\n  function toggleModal() {\n    refs.body.classList.remove('body-fixed');\n    // console.log(refs.body);\n\n    refs.modal.classList.add('is-hidden');\n    refs.info.innerHTML = '';\n  }\n}\n\n// }\nexport { renderModal };\n"],"names":["$40873ecf3c18e122$export$69bf191433722f78","event","nameStor","refs","openModalBtn","document","querySelector","modal","info","body","classList","add","target","nodeName","currentMovie","JSON","parse","localStorage","getItem","find","curentId","String","id","console","log","watched","queue","isInWatched","some","item","isInQueue","modalRender","concat","poster_path","title","vote_average","vote_count","popularity","genre_ids","join","overview","insertAdjacentHTML","remove","addEventListener","innerHTML","watchedBtn","queueBtn","map","el","includes","filter","setItem","stringify","textContent","disabled","push","idInQ","ev","evt"],"version":3,"file":"library.4cbbbd89.js.map"}