{"mappings":"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","sources":["src/index.js","src/js/fetchPopular.js","src/js/fetchGenres.js","src/js/searchMovie.js","src/js/addToLocalStorage.js","src/js/btn-pag.js"],"sourcesContent":["import './js/preloader';\nimport './js/scroll-up.js';\nimport './js/crew1/crew-list';\nimport { fetchPopular } from './js/fetchPopular.js';\nimport { fetchGenres } from './js/fetchGenres.js';\nimport { searchMovie } from './js/searchMovie';\nimport { addToLocalStorage } from './js/addToLocalStorage';\nimport './js/theme-switcher';\nimport './sass/main.scss';\nimport { toTopOnClick } from './js/scroll-up';\n\nimport { renderModal } from './js/modal.js';\nimport { clickCounter } from './js/btn-pag';\nconst btnList = document.querySelector('.btn__list');\nconst list = document.querySelector('.gallery__list');\nconst form = document.querySelector('.search');\nconst warning = document.querySelector('.warning');\nconst counterPage = document.querySelector('.counter');\nconst logo = document.querySelector('.header__logo');\n\nlet currentPage = sessionStorage.getItem('currentNumPage')\n  ? JSON.parse(sessionStorage.getItem('currentNumPage'))\n  : 1;\nlet query = sessionStorage.getItem('currentSerch')\n  ? JSON.parse(sessionStorage.getItem('currentSerch'))\n  : '';\n\ndocument.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.search.value;\n  addToLocalStorage(searchMovie, fetchGenres, 1, query);\n}\n\nif (!query) {\n  addToLocalStorage(fetchPopular, fetchGenres, currentPage);\n} else {\n  addToLocalStorage(searchMovie, fetchGenres, currentPage, query);\n}\n\nlist.addEventListener('click', clickHeroCard);\n\nfunction clickHeroCard(evt) {\n  renderModal(evt, 'currentPage');\n}\n\nbtnList.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  if (evt.target.nodeName === 'BUTTON') {\n    toTopOnClick();\n    console.log(evt.target.nodeName);\n    currentPage = sessionStorage.getItem('currentNumPage')\n      ? JSON.parse(sessionStorage.getItem('currentNumPage'))\n      : 1;\n    query = sessionStorage.getItem('currentSerch')\n      ? JSON.parse(sessionStorage.getItem('currentSerch'))\n      : '';\n    currentPage = clickCounter(evt, currentPage);\n    if (!query) {\n      addToLocalStorage(fetchPopular, fetchGenres, currentPage);\n    } else {\n      addToLocalStorage(searchMovie, fetchGenres, currentPage, query);\n    }\n  }\n}\n\n// -----GoHome\nlogo.addEventListener('click', goHome);\n\nfunction goHome() {\n  console.log(123);\n  query = '';\n  currentPage = 1;\n  addToLocalStorage(fetchPopular, fetchGenres, currentPage);\n}\n","const API_KEY = '74df5c4b3da0f8bb23d044877e91bb86';\nconst API_URL_TRENDING = 'https://api.themoviedb.org/3/trending/';\nconst MEDIA_TYPE = 'movie';\nconst TIME_WINDOW = 'day';\n// let page = 1;\n\nfunction fetchPopular(page = 1) {\n  return fetch(\n    `${API_URL_TRENDING}${MEDIA_TYPE}/${TIME_WINDOW}?api_key=${API_KEY}&page=${page}`\n  ).then(response => {\n    return response.json();\n  });\n}\n\n// Функция добавляет популярные фильмы  в локальное хранилище\n\n// function addPopularToLocalStorage(){\n//   fetchPopular().then(data => {\n//     localStorage.setItem('popular', JSON.stringify(data));\n//   });\n// }\n\nexport { fetchPopular };\n","\n\nasync function fetchGenres() {\n    return await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=74df5c4b3da0f8bb23d044877e91bb86&language=en-US`).then(response => {\n        return response.json();\n    });\n}\n\n// Функция добавляет жанры в локальное хранилище\n// fetchGenres().then(data => {\n//     localStorage.setItem('genres', JSON.stringify(data));\n//   });\n\n//Переменная хранит в себе жанры из локального хранилища\n// const genresArray = JSON.parse(localStorage.getItem('genres'));\n\n\nexport { fetchGenres } ","const API_KEY = '74df5c4b3da0f8bb23d044877e91bb86';\nconst BASE_URL = 'https://api.themoviedb.org/3/search/movie?';\nconst LANG = 'en-US';\n// const PAGE = 1;\n\nasync function searchMovie(page = 1, query) {\n  return await fetch(\n    `${BASE_URL}query=${query}&api_key=${API_KEY}&language=${LANG}&page=${page}`\n  ).then(response => {\n    return response.json().catch(error => {\n      console.log(error);\n    });\n  });\n}\n\nexport { searchMovie };\n","import { renderMovieCard } from './renderMovieCard';\nimport { counter } from './btn-pag';\n\nconst list = document.querySelector('.gallery__list');\nconst warning = document.querySelector('.warning');\n\nfunction addToLocalStorage(fetch, fetchGenres, page, movie = '') {\n  sessionStorage.setItem('currentNumPage', JSON.stringify(page));\n  sessionStorage.setItem('currentSerch', JSON.stringify(movie));\n  fetch(page, movie).then(cards => {\n    // console.log(cards.total_pages);\n    fetchGenres().then(data => {\n      const cardGanr = cards.results;\n      cards.results.forEach((card, ind) => {\n        card.genre_ids.forEach((id, indx) => {\n          data.genres.forEach(el => {\n            if (el.id === id) {\n              cardGanr[ind].genre_ids[indx] = el.name;\n            }\n          });\n        });\n      });\n\n      counter(cards.total_pages, page);\n\n      localStorage.setItem('currentPage', JSON.stringify(cardGanr));\n      if (cardGanr.length === 0) {\n        warning.classList.remove('hidden');\n        form.reset();\n      } else {\n        warning.classList.add('hidden');\n        const markup = renderMovieCard(cardGanr);\n        list.innerHTML = markup;\n      }\n    });\n  });\n}\n\nexport { addToLocalStorage };\n","// import { renderWeb } from '../index';\n\nconst btnList = document.querySelector('.btn__list');\nconst counterPage = document.querySelector('.counter');\nconst prevBtn = document.querySelector('#prev_btn');\nconst firstBtn = document.querySelector('#first_btn');\nconst dotLeftBtn = document.querySelector('#left_dot_btn');\nconst leftSecBtn = document.querySelector('#left_sec_btn');\nconst leftBtn = document.querySelector('#left_btn');\nconst centertBtn = document.querySelector('#center_btn');\nconst rightBtn = document.querySelector('#right_btn');\nconst rightSecBtn = document.querySelector('#right_sec_btn');\nconst dotRightBtn = document.querySelector('#right_dot_btn');\nconst lastBtn = document.querySelector('#last_btn');\nconst nextBtn = document.querySelector('#next_btn');\n\nfunction counter(totalPage, counterValue = 1) {\n  if (totalPage > 1) {\n    btnList.classList.remove('visually-hidden');\n  } else {\n    btnList.classList.add('visually-hidden');\n  }\n  firstBtn.textContent = 1;\n  if (Number(firstBtn.textContent) + 3 >= counterValue) {\n    dotLeftBtn.classList.add('visually-hidden');\n  } else {\n    dotLeftBtn.classList.remove('visually-hidden');\n  }\n\n  if (Number(firstBtn.textContent) + 2 >= counterValue) {\n    firstBtn.classList.add('visually-hidden');\n  } else {\n    firstBtn.classList.remove('visually-hidden');\n  }\n\n  leftSecBtn.textContent = counterValue - 2;\n  if (Number(leftSecBtn.textContent) <= 0) {\n    leftSecBtn.classList.add('visually-hidden');\n  } else {\n    leftSecBtn.classList.remove('visually-hidden');\n  }\n\n  leftBtn.textContent = counterValue - 1;\n  if (Number(leftBtn.textContent) <= 0) {\n    leftBtn.classList.add('visually-hidden');\n  } else {\n    leftBtn.classList.remove('visually-hidden');\n  }\n\n  centertBtn.textContent = counterValue;\n  if (Number(centertBtn.textContent) === totalPage) {\n    nextBtn.classList.add('visually-hidden');\n  } else {\n    nextBtn.classList.remove('visually-hidden');\n  }\n  if (Number(centertBtn.textContent) === 1) {\n    prevBtn.classList.add('visually-hidden');\n  } else {\n    prevBtn.classList.remove('visually-hidden');\n  }\n  rightBtn.textContent = counterValue + 1;\n  if (Number(rightBtn.textContent) > totalPage) {\n    rightBtn.classList.add('visually-hidden');\n  } else {\n    rightBtn.classList.remove('visually-hidden');\n  }\n  rightSecBtn.textContent = counterValue + 2;\n  if (Number(rightSecBtn.textContent) > totalPage) {\n    rightSecBtn.classList.add('visually-hidden');\n  } else {\n    rightSecBtn.classList.remove('visually-hidden');\n  }\n\n  lastBtn.textContent = totalPage;\n  if (Number(lastBtn.textContent) - 3 <= counterValue) {\n    dotRightBtn.classList.add('visually-hidden');\n  } else {\n    dotRightBtn.classList.remove('visually-hidden');\n  }\n\n  if (Number(lastBtn.textContent) - 2 <= counterValue) {\n    lastBtn.classList.add('visually-hidden');\n  } else {\n    lastBtn.classList.remove('visually-hidden');\n  }\n\n  counterPage.textContent = counterValue;\n  // renderWeb(counterValue);\n\n  // console.log(counterValue);\n  // if (counterValue > 1) {\n  //   prevBtn.classList.remove('visually-hidden');\n  // } else {\n  //   prevBtn.classList.add('visually-hidden');\n  // }\n  // if (totalPage > 7 && counterValue > 3) {\n  //   dotLeftBtn.classList.remove('visually-hidden');\n  // } else {\n  //   dotLeftBtn.classList.add('visually-hidden');\n  // }\n  // if (totalPage > 7 && counterValue < totalPage - 3) {\n  //   dotRightBtn.classList.remove('visually-hidden');\n  // } else {\n  //   dotRightBtn.classList.add('visually-hidden');\n  // }\n  // if (totalPage === counterValue) {\n  //   nextBtn.classList.add('visually-hidden');\n  // } else {\n  //   nextBtn.classList.remove('visually-hidden');\n  // }\n\n  // if (counterValue === 1) {\n  //   firstBtn.classList.add('activ-btn');\n  //   leftSecBtn.textContent = counterValue + 1;\n  //   leftBtn.textContent = counterValue + 2;\n  //   centertBtn.textContent = counterValue + 3;\n  //   rightBtn.textContent = counterValue + 4;\n  //   rightSecBtn.textContent = counterValue + 5;\n  // } else {\n  //   firstBtn.classList.remove('activ-btn');\n  // }\n  // if (counterValue === 2) {\n  //   leftSecBtn.classList.add('activ-btn');\n  //   leftSecBtn.textContent = counterValue;\n  // } else {\n  //   leftSecBtn.classList.remove('activ-btn');\n  // }\n  // if (counterValue === 3) {\n  //   leftBtn.classList.add('activ-btn');\n  //   leftBtn.textContent = counterValue;\n  // } else {\n  //   leftBtn.classList.remove('activ-btn');\n  // }\n  // if (counterValue === totalPage) {\n  //   lastBtn.classList.add('activ-btn');\n  //   leftSecBtn.textContent = counterValue - 5;\n  //   leftBtn.textContent = counterValue - 4;\n  //   centertBtn.textContent = counterValue - 3;\n  //   rightBtn.textContent = counterValue - 2;\n  //   rightSecBtn.textContent = counterValue - 1;\n  // } else {\n  //   lastBtn.classList.remove('activ-btn');\n  // }\n  // if (counterValue === totalPage - 1) {\n  //   rightSecBtn.classList.add('activ-btn');\n  //   rightSecBtn.textContent = counterValue;\n  // } else {\n  //   rightSecBtn.classList.remove('activ-btn');\n  // }\n  // if (counterValue === totalPage - 2) {\n  //   rightBtn.classList.add('activ-btn');\n  //   rightBtn.textContent = counterValue;\n  // } else {\n  //   rightBtn.classList.remove('activ-btn');\n  // }\n  // if (counterValue < totalPage - 2 && counterValue > 3) {\n  //   centertBtn.classList.add('activ-btn');\n  //   leftSecBtn.textContent = counterValue - 2;\n  //   leftBtn.textContent = counterValue - 1;\n  //   centertBtn.textContent = counterValue;\n  //   rightBtn.textContent = counterValue + 1;\n  //   rightSecBtn.textContent = counterValue + 2;\n  // } else {\n  //   centertBtn.classList.remove('activ-btn');\n  // }\n}\nfunction clickCounter(evt, counterValue) {\n  if (evt.target.id === 'next_btn') {\n    counterValue += 1;\n  }\n  if (evt.target.id === 'prev_btn') {\n    counterValue -= 1;\n  }\n  if ([...evt.target.classList].includes('num')) {\n    counterValue = Number(evt.target.textContent);\n  }\n\n  counterPage.textContent = counterValue;\n  return counterValue;\n}\n\nexport { counter, clickCounter };\n"],"names":["parcelRequire","$4a801e192cbb1f8b$export$16bf2264c00353d2","page","fetch","then","response","json","async","$5844b68ee09a1fe1$export$e95d448b93b2cdb","$9488da62bf55fdf0$export$dd14e5c8db127693","query","catch","error","console","log","$iJbGQ","$d7c841275437e56c$var$btnList","document","querySelector","$d7c841275437e56c$var$counterPage","$d7c841275437e56c$var$prevBtn","$d7c841275437e56c$var$firstBtn","$d7c841275437e56c$var$dotLeftBtn","$d7c841275437e56c$var$leftSecBtn","$d7c841275437e56c$var$leftBtn","$d7c841275437e56c$var$centertBtn","$d7c841275437e56c$var$rightBtn","$d7c841275437e56c$var$rightSecBtn","$d7c841275437e56c$var$dotRightBtn","$d7c841275437e56c$var$lastBtn","$d7c841275437e56c$var$nextBtn","$d7c841275437e56c$export$e575061ef2a070eb","totalPage","counterValue","classList","remove","add","textContent","Number","$d7c841275437e56c$export$d528d3fe6369bfee","evt","target","id","includes","$39609341b24e273a$var$list","$39609341b24e273a$var$warning","$39609341b24e273a$export$b4aebac53294aa19","fetchGenres","movie","sessionStorage","setItem","JSON","stringify","cards","data","cardGanr","results","forEach","card","ind","genre_ids","indx","genres","el","name","total_pages","localStorage","length","form","reset","markup","renderMovieCard","innerHTML","$1f0dc3b9307be026$var$btnList","$1f0dc3b9307be026$var$list","$1f0dc3b9307be026$var$logo","$1f0dc3b9307be026$var$currentPage","getItem","parse","$1f0dc3b9307be026$var$query","addEventListener","e","preventDefault","search","value","$bTcpz","renderModal","nodeName","$74Aiq","toTopOnClick"],"version":3,"file":"index.758e68e3.js.map"}