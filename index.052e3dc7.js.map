{"mappings":"oeAAAA,EAAA,S,WCMA,SAASC,IACP,OAAOC,MACL,mGACAC,MAAKC,GACEA,EAASC,SCJpBC,eAAeC,EAAYC,GACvB,aAAaN,MAAM,mDAAoBM,oEAA0DL,MAAKC,GAC3FA,EAASC,OAAOI,OAAMC,IAAWC,QAAQC,IAAIF,QCN5DJ,eAAeO,IACX,aAAaX,MAAM,yGAAyGC,MAAKC,GACtHA,EAASC,S,iBCJxB,SAASS,EAAkBZ,EAAOa,EAAaC,EAAQ,IACrDd,EAAMc,GAAOb,MAAKc,IAEhBF,IAAcZ,MAAKe,IACjB,MAAMC,EAAWF,EAAMG,QACvBH,EAAMG,QAAQC,SAAQ,CAACC,EAAMC,KAC3BD,EAAKE,UAAUH,SAAQ,CAACI,EAAIC,KAC1BR,EAAKS,OAAON,SAAQO,IACdA,EAAGH,KAAOA,IACZN,EAASI,GAAKC,UAAUE,GAAQE,EAAGC,eAK3ClB,QAAQC,IAAIO,GAEZW,aAAaC,QAAQ,cAAeC,KAAKC,UAAUd,U,4BJHzD,MAAMe,EAAOC,SAASC,cAAc,kBAC9BC,EAAOF,SAASC,cAAc,WAC9BE,EAAUH,SAASC,cAAc,YAIvCtB,EAAkBb,EAAcY,GAEhCZ,IAAeE,MAAKe,IAClB,MAAMqB,EAAUrB,EAAKE,QACfoB,GAAS,EAAAC,EAAAC,iBAAgBH,GAC/BL,EAAKS,UAAYH,KAInBL,SAASS,iBAAiB,UAC1B,SAAsBC,GACpBA,EAAEC,iBACF,MAAMtC,EAAQqC,EAAEE,OAAOC,OAAOC,MAC9BnC,EAAkBP,EAAaM,EAAaL,GAC5CD,EAAYC,GAAOL,MAAKe,IAEtB,GAAe,IADAA,EAAKE,QAAQ8B,OAE1BZ,EAAQa,UAAUC,OAAO,UACzBf,EAAKgB,YACA,CACLf,EAAQa,UAAUG,IAAI,UACtB,MAAMC,EAASrC,EAAKE,QACdoB,GAAS,EAAAC,EAAAC,iBAAgBa,GAC/BrB,EAAKS,UAAYH,SAKvBN,EAAKU,iBAAiB,SACtB,SAAuBY,IACrB,EAAAC,EAAAC,aAAYF,EAAK","sources":["src/index.js","src/js/fetchPopular.js","src/js/searchMovie.js","src/js/fetchGenres.js","src/js/addToLocalStorage.js"],"sourcesContent":["import './js/scroll-up.js';\nimport './js/Crew/crew-list.js';\nimport { fetchPopular } from './js/fetchPopular.js';\nimport { searchMovie } from './js/searchMovie';\nimport { fetchGenres } from './js/fetchGenres.js';\nimport { renderMovieCard } from './js/renderMovieCard';\nimport { addToLocalStorage } from './js/addToLocalStorage';\nimport './js/theme-switcher';\nimport './sass/main.scss';\n\nimport { renderCard } from './js/renderCard';\nimport { renderModal } from './js/modal.js';\n\nconst list = document.querySelector('.gallery__list');\nconst form = document.querySelector('.search');\nconst warning = document.querySelector('.warning');\n\n//добавляет в локальное хранилище\n\naddToLocalStorage(fetchPopular, fetchGenres);\n\nfetchPopular().then(data => {\n  const popular = data.results;\n  const markup = renderMovieCard(popular);\n  list.innerHTML = markup;\n});\n\n// Cлушатели\ndocument.addEventListener('submit', onFormSubmit);\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  const query = e.target.search.value;\n  addToLocalStorage(searchMovie, fetchGenres, query);\n  searchMovie(query).then(data => {\n    const length = data.results.length;\n    if (length === 0) {\n      warning.classList.remove('hidden');\n      form.reset();\n    } else {\n      warning.classList.add('hidden');\n      const movies = data.results;\n      const markup = renderMovieCard(movies);\n      list.innerHTML = markup;\n    }\n  });\n}\n\nlist.addEventListener('click', clickHeroCard);\nfunction clickHeroCard(evt) {\n  renderModal(evt, 'currentPage');\n}\n","const API_KEY = '74df5c4b3da0f8bb23d044877e91bb86';\nconst API_URL_TRENDING = 'https://api.themoviedb.org/3/trending/';\nconst MEDIA_TYPE = 'movie';\nconst TIME_WINDOW = 'day';\nlet page = 1;\n\nfunction fetchPopular() {\n  return fetch(\n    `${API_URL_TRENDING}${MEDIA_TYPE}/${TIME_WINDOW}?api_key=${API_KEY}&page=${page}`\n  ).then(response => {\n    return response.json();\n  });\n}\n\n\n// Функция добавляет популярные фильмы  в локальное хранилище\n\n// function addPopularToLocalStorage(){\n//   fetchPopular().then(data => {\n//     localStorage.setItem('popular', JSON.stringify(data));\n//   });\n// }\n\n\nexport { fetchPopular }\n","const API_KEY = \"74df5c4b3da0f8bb23d044877e91bb86\";\nconst BASE_URL = \"https://api.themoviedb.org/3/search/movie?\";\nconst LANG = \"en-US\";\nconst PAGE = 1;\n\n\nasync function searchMovie(query) {\n    return await fetch(`${BASE_URL}query=${query}&api_key=${API_KEY}&language=${LANG}&page=${PAGE}`).then(response => {\n        return response.json().catch(error => { console.log(error) })\n    })\n}\n\nexport { searchMovie }","\n\nasync function fetchGenres() {\n    return await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=74df5c4b3da0f8bb23d044877e91bb86&language=en-US`).then(response => {\n        return response.json();\n    });\n}\n\n// Функция добавляет жанры в локальное хранилище\n// fetchGenres().then(data => {\n//     localStorage.setItem('genres', JSON.stringify(data));\n//   });\n\n//Переменная хранит в себе жанры из локального хранилища\n// const genresArray = JSON.parse(localStorage.getItem('genres'));\n\n\nexport { fetchGenres } ","function addToLocalStorage(fetch, fetchGenres, movie = '') {\n  fetch(movie).then(cards => {\n    // console.log(card.results);\n    fetchGenres().then(data => {\n      const cardGanr = cards.results;\n      cards.results.forEach((card, ind) => {\n        card.genre_ids.forEach((id, indx) => {\n          data.genres.forEach(el => {\n            if (el.id === id) {\n              cardGanr[ind].genre_ids[indx] = el.name;\n            }\n          });\n        });\n      });\n      console.log(cardGanr);\n\n      localStorage.setItem('currentPage', JSON.stringify(cardGanr));\n    });\n  });\n}\n\nexport { addToLocalStorage };\n"],"names":["parcelRequire","$4a801e192cbb1f8b$export$16bf2264c00353d2","fetch","then","response","json","async","$9488da62bf55fdf0$export$dd14e5c8db127693","query","catch","error","console","log","$5844b68ee09a1fe1$export$e95d448b93b2cdb","$39609341b24e273a$export$b4aebac53294aa19","fetchGenres","movie","cards","data","cardGanr","results","forEach","card","ind","genre_ids","id","indx","genres","el","name","localStorage","setItem","JSON","stringify","$1f0dc3b9307be026$var$list","document","querySelector","$1f0dc3b9307be026$var$form","$1f0dc3b9307be026$var$warning","popular","markup","$iJbGQ","renderMovieCard","innerHTML","addEventListener","e","preventDefault","target","search","value","length","classList","remove","reset","add","movies","evt","$bTcpz","renderModal"],"version":3,"file":"index.052e3dc7.js.map"}