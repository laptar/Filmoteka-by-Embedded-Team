{"mappings":"khBAAA,SAASA,EAAYC,GACnB,MAAMC,EAAO,CACXC,aAAcC,SAASC,cAAc,qBACrCC,MAAOF,SAASC,cAAc,gBAC9BE,KAAMH,SAASC,cAAc,WAsI/B,SAASG,IACPN,EAAKI,MAAMG,UAAUC,IAAI,aACzBR,EAAKK,KAAKI,UAAY,GAtIxBT,EAAKC,aAAaS,iBAAiB,SACnC,SAAyBC,GACvB,GAA8B,QAA1BA,EAAMC,OAAOC,SAAoB,CAEnC,MACMC,EADMC,KAAKC,MAAMC,aAAaC,QAAQnB,IACnBoB,MACvBC,GAAYC,OAAOD,EAASE,MAAQX,EAAMC,OAAOU,KAI7CC,EAAc,oLAIuBT,EAAaU,8BAC/CV,EAAaW,mGAIKX,EAAaW,6QAMXX,EAAaY,+EAEhCZ,EAAaa,qMAMiBb,EAAac,yMAKbd,EAAaW,6KAIbX,EAAae,UAAUC,KACvD,sJAMuBhB,EAAaiB,8VAa5C/B,EAAKK,KAAK2B,mBAAmB,YAAaT,GAC1CvB,EAAKI,MAAMG,UAAU0B,OAAO,aACN/B,SAASC,cAAc,sBAC/BO,iBAAiB,QAASJ,GAErB,MAAb4B,EAAahC,SAASC,cAAc,0BACpCgC,EAAWjC,SAASC,cAAc,wBAEZ,IAAxBiC,EAAUnB,aAAaC,QAAQ,WAC/BH,KAAKC,MAAMC,aAAaC,QAAQ,YAChC,GACAmB,EAAQpB,aAAaC,QAAQ,SAC7BH,KAAKC,MAAMC,aAAaC,QAAQ,UAChC,GAIJ,GADcG,OAAOe,EAAQE,KAAIC,GAAMA,EAAGjB,MAChCkB,SAAS7B,EAAMC,OAAOU,IAAK,CACnCY,EAAWO,YAAc,eACzBP,EAAWxB,iBAAiB,SAC5B,WACE0B,EAAUA,EAAQM,QAAOH,GAAMlB,OAAOkB,EAAGjB,MAAQX,EAAMC,OAAOU,KAC9DL,aAAa0B,QAAQ,UAAW5B,KAAK6B,UAAUR,IAC/C9B,WAEG,CACL4B,EAAWxB,iBAAiB,SAC5B,WACO0B,EAAQjB,MAAK0B,GAAQA,EAAKvB,KAAOR,EAAaQ,OACjDc,EAAQU,KAAKhC,GACbG,aAAa0B,QAAQ,UAAW5B,KAAK6B,UAAUR,IAC/C9B,QAON,GADce,OAAOgB,EAAMC,KAAIC,GAAMA,EAAGjB,MAC9BkB,SAAS7B,EAAMC,OAAOU,IAAK,CACnCa,EAASM,YAAc,eACvBN,EAASzB,iBAAiB,SAC1B,WACE2B,EAAQA,EAAMK,QAAOH,GAAMlB,OAAOkB,EAAGjB,MAAQX,EAAMC,OAAOU,KAC1DL,aAAa0B,QAAQ,QAAS5B,KAAK6B,UAAUP,IAC7C/B,WAEG,CACL6B,EAASM,YAAc,eACvBN,EAASzB,iBAAiB,SAC1B,WACO2B,EAAMlB,MAAK0B,GAAQA,EAAKvB,KAAOR,EAAaQ,OAC/Ce,EAAMS,KAAKhC,GACXG,aAAa0B,QAAQ,QAAS5B,KAAK6B,UAAUP,IAC7C/B,QAKNJ,SAASQ,iBAAiB,WAAWqC,IACnC/C,EAAKI,MAAMG,UAAUC,IAAI,aACzBR,EAAKK,KAAKI,UAAY,MAExBT,EAAKI,MAAMM,iBAAiB,aAAasC,IACX,YAAxBA,EAAIpC,OAAOC,WACbb,EAAKI,MAAMG,UAAUC,IAAI,aACzBR,EAAKK,KAAKI,UAAY,W","sources":["src/js/modal_close.js"],"sourcesContent":["function renderModal(nameStor) {\n  const refs = {\n    openModalBtn: document.querySelector('[data-modal-open]'),\n    modal: document.querySelector('[data-modal]'),\n    info: document.querySelector('.modal'),\n  };\n  refs.openModalBtn.addEventListener('click', toggleModalOpen);\n  function toggleModalOpen(event) {\n    if (event.target.nodeName === 'IMG') {\n      // console.log(JSON.parse(localStorage.getItem('currentPage')));\n      const arr = JSON.parse(localStorage.getItem(nameStor));\n      const currentMovie = arr.find(\n        curentId => String(curentId.id) === event.target.id\n      );\n      // console.log(currentMovie);\n      // Додаємо дві змінні 2 обєкта які беремо із локал сторадж, потім кожен розпрсимо, і кожен файндом перебиремо, якщо фільм доданий то в шаблонку вставляємо тернарнік, і міняємо ADD /remuv\n      const modalRender = `\n      <button type=\"button\" class=\"modal__button-close\" data-modal-close></button>\n    <div class=\"modal__image\">\n      <img\n        src = \"https://image.tmdb.org/t/p/w500/${currentMovie.poster_path}\"\n        alt=\"${currentMovie.title}\"\n           />\n    </div>\n    <div class=\"modal-info\">\n      <h1 class=\"modal__title\">${currentMovie.title}</h1>\n      <table class=\"modale_table\">\n        <tbody class=\"modale_table\">\n          <tr class=\"modale_table-row\">\n            <td class=\"modale__table-name\">Vote/Votes</td>\n            <td class=\"modale__table-about\">\n              <span class=\"vote\">${currentMovie.vote_average}</span>\n              <span class=\"modale__table-name\">/</span>${\n                currentMovie.vote_count\n              }\n            </td>\n          </tr>\n          <tr class=\"modale__table-row\">\n            <td class=\"modale__table-name\">Popularity</td>\n            <td class=\"modale__table-about\">${currentMovie.popularity}\n            </td>\n          </tr>\n          <tr class=\"modale__table-row\">\n            <td class=\"modale__table-name\">Original Title</td>\n            <td class=\"modale__table-about\">${currentMovie.title}</td>\n          </tr>\n          <tr class=\"modale__table-row\">\n            <td class=\"modale__table-name\">Genre</td>\n            <td class=\"modale__table-about\">${currentMovie.genre_ids.join(\n              ', '\n            )}</td>\n          </tr>\n        </tbody>\n      </table>\n      <h2 class=\"modal__about-title\">About</h2>\n      <p class=\"modal__about-text\">${currentMovie.overview}</p>\n      <div class=\"buttons\">\n        <button\n          type=\"button\"\n          class=\"modal__button-watched modal__button-text\"\n        >\n          add to Watched\n        </button>\n        <button type=\"button\" class=\"modal__button-queue modal__button-text\">\n          add to queue\n        </button>\n      </div>\n    </div>`;\n      refs.info.insertAdjacentHTML('beforeend', modalRender);\n      refs.modal.classList.remove('is-hidden');\n      const closeModalBtn = document.querySelector('[data-modal-close]');\n      closeModalBtn.addEventListener('click', toggleModal);\n      // Змінні кнопок модалки\n      const watchedBtn = document.querySelector('.modal__button-watched');\n      const queueBtn = document.querySelector('.modal__button-queue');\n      // Провірка чи є щось в локал сторедж\n      let watched = localStorage.getItem('watched')\n        ? JSON.parse(localStorage.getItem('watched'))\n        : [];\n      let queue = localStorage.getItem('queue')\n        ? JSON.parse(localStorage.getItem('queue'))\n        : [];\n      //----\n      // Кнопка додавання та видалення з вотч\n      const idInW = String(watched.map(el => el.id));\n      if (idInW.includes(event.target.id)) {\n        watchedBtn.textContent = 'REMUVE WATCH';\n        watchedBtn.addEventListener('click', remuveWatch);\n        function remuveWatch() {\n          watched = watched.filter(el => String(el.id) !== event.target.id);\n          localStorage.setItem('watched', JSON.stringify(watched));\n          toggleModal();\n        }\n      } else {\n        watchedBtn.addEventListener('click', addToWatchList);\n        function addToWatchList() {\n          if (!watched.find(item => item.id === currentMovie.id)) {\n            watched.push(currentMovie);\n            localStorage.setItem('watched', JSON.stringify(watched));\n            toggleModal();\n          }\n        }\n      }\n      // ----\n      // Кнопка додавання та видалення з кювеє\n      const idInQ = String(queue.map(el => el.id));\n      if (idInQ.includes(event.target.id)) {\n        queueBtn.textContent = 'REMUVE QUEUE';\n        queueBtn.addEventListener('click', remuveWatch);\n        function remuveWatch() {\n          queue = queue.filter(el => String(el.id) !== event.target.id);\n          localStorage.setItem('queue', JSON.stringify(queue));\n          toggleModal();\n        }\n      } else {\n        queueBtn.textContent = 'ADD TO QUEUE';\n        queueBtn.addEventListener('click', addToQueueList);\n        function addToQueueList() {\n          if (!queue.find(item => item.id === currentMovie.id)) {\n            queue.push(currentMovie);\n            localStorage.setItem('queue', JSON.stringify(queue));\n            toggleModal();\n          }\n        }\n      }\n      // ----\n      document.addEventListener('keydown', ev => {\n        refs.modal.classList.add('is-hidden');\n        refs.info.innerHTML = '';\n      });\n      refs.modal.addEventListener('mousedown', evt => {\n        if (evt.target.nodeName === 'SECTION') {\n          refs.modal.classList.add('is-hidden');\n          refs.info.innerHTML = '';\n        }\n      });\n    }\n  }\n  function toggleModal() {\n    refs.modal.classList.add('is-hidden');\n    refs.info.innerHTML = '';\n  }\n}\nexport { renderModal };\n"],"names":["$e441e55a68713635$export$69bf191433722f78","nameStor","refs","openModalBtn","document","querySelector","modal","info","toggleModal","classList","add","innerHTML","addEventListener","event","target","nodeName","currentMovie","JSON","parse","localStorage","getItem","find","curentId","String","id","modalRender","poster_path","title","vote_average","vote_count","popularity","genre_ids","join","overview","insertAdjacentHTML","remove","watchedBtn","queueBtn","watched","queue","map","el","includes","textContent","filter","setItem","stringify","item","push","ev","evt"],"version":3,"file":"library.2646bd1a.js.map"}