{"mappings":"oeAAAA,EAAA,S,sBCMA,SAASC,EAAaC,EAAO,GAC3B,OAAOC,MACL,iGAA2ED,KAC3EE,MAAKC,GACEA,EAASC,SCRpBC,eAAeC,IACX,aAAaL,MAAM,yGAAyGC,MAAKC,GACtHA,EAASC,SCCxBC,eAAeE,EAAYP,EAAO,EAAGQ,GACnC,aAAaP,MACX,mDAAoBO,kEAAkDR,KACtEE,MAAKC,GACEA,EAASC,OAAOK,OAAMC,IAC3BC,QAAQC,IAAIF,QCVlB,IAAAG,EAAAf,EAAA,S,aAGA,MAAMgB,EAAOC,SAASC,cAAc,kBAC9BC,EAAUF,SAASC,cAAc,YAEvC,SAASE,EAAkBjB,EAAOkB,EAAanB,EAAMoB,EAAQ,IAC3DC,eAAeC,QAAQ,iBAAkBC,KAAKC,UAAUxB,IACxDqB,eAAeC,QAAQ,eAAgBC,KAAKC,UAAUJ,IACtDnB,EAAMD,EAAMoB,GAAOlB,MAAKuB,IAEtBN,IAAcjB,MAAKwB,IACjB,MAAMC,EAAWF,EAAMG,QAcvB,GAbAH,EAAMG,QAAQC,SAAQ,CAACC,EAAMC,KAC3BD,EAAKE,UAAUH,SAAQ,CAACI,EAAIC,KAC1BR,EAAKS,OAAON,SAAQO,IACdA,EAAGH,KAAOA,IACZN,EAASI,GAAKC,UAAUE,GAAQE,EAAGC,gBAM3C,EAAAC,EAAAC,SAAQd,EAAMe,YAAaxC,GAE3ByC,aAAanB,QAAQ,cAAeC,KAAKC,UAAUG,IAC3B,IAApBA,EAASe,OACXzB,EAAQ0B,UAAUC,OAAO,UACzBC,KAAKC,YACA,CACL7B,EAAQ0B,UAAUI,IAAI,UACtB,MAAMC,GAAS,EAAAnC,EAAAoC,iBAAgBtB,GAC/Bb,EAAKoC,UAAYF,S,sDJlBzB,MAAMG,EAAUpC,SAASC,cAAc,cACjCoC,EAAOrC,SAASC,cAAc,kBAI9BqC,GAHOtC,SAASC,cAAc,WACpBD,SAASC,cAAc,YACnBD,SAASC,cAAc,YAC9BD,SAASC,cAAc,kBAEpC,IAAIsC,EAAcjC,eAAekC,QAAQ,kBACrChC,KAAKiC,MAAMnC,eAAekC,QAAQ,mBAClC,EACAE,EAAQpC,eAAekC,QAAQ,gBAC/BhC,KAAKiC,MAAMnC,eAAekC,QAAQ,iBAClC,GAEJxC,SAAS2C,iBAAiB,UAE1B,SAAsBC,GACpBA,EAAEC,iBACFH,EAAQE,EAAEE,OAAOC,OAAOC,MACxB7C,EAAkBX,EAAaD,EAAa,EAAGmD,MAG5CA,EAGHvC,EAAkBX,EAAaD,EAAagD,EAAaG,GAFzDvC,EAAkBnB,EAAcO,EAAagD,GAK/CF,EAAKM,iBAAiB,SAEtB,SAAuBM,IACrB,EAAAC,EAAAC,aAAYF,EAAK,kBAGnBb,EAAQO,iBAAiB,SAEzB,SAAiBM,GACa,WAAxBA,EAAIH,OAAOM,YACb,EAAAC,EAAAC,gBACAf,EAAcjC,eAAekC,QAAQ,kBACjChC,KAAKiC,MAAMnC,eAAekC,QAAQ,mBAClC,EACJE,EAAQpC,eAAekC,QAAQ,gBAC3BhC,KAAKiC,MAAMnC,eAAekC,QAAQ,iBAClC,GACJD,GAAc,EAAAhB,EAAAgC,cAAaN,EAAKV,GAC3BG,EAGHvC,EAAkBX,EAAaD,EAAagD,EAAaG,GAFzDvC,EAAkBnB,EAAcO,EAAagD,OAQnDD,EAAKK,iBAAiB,SAEtB,WACE/C,QAAQC,IAAI,KACZ6C,EAAQ,GACRH,EAAc,EACdpC,EAAkBnB,EAAcO,EAAagD","sources":["src/index.js","src/js/fetchPopular.js","src/js/fetchGenres.js","src/js/searchMovie.js","src/js/addToLocalStorage.js"],"sourcesContent":["import './js/preloader';\nimport './js/scroll-up.js';\nimport './js/crew1/crew-list';\nimport { fetchPopular } from './js/fetchPopular.js';\nimport { fetchGenres } from './js/fetchGenres.js';\nimport { searchMovie } from './js/searchMovie';\nimport { addToLocalStorage } from './js/addToLocalStorage';\nimport './js/theme-switcher';\nimport './sass/main.scss';\nimport { toTopOnClick } from './js/scroll-up';\n// import { spinnerr } from './js/spinner';\n\nimport { renderModal } from './js/modal.js';\nimport { clickCounter } from './js/btn-pag';\nconst btnList = document.querySelector('.btn__list');\nconst list = document.querySelector('.gallery__list');\nconst form = document.querySelector('.search');\nconst warning = document.querySelector('.warning');\nconst counterPage = document.querySelector('.counter');\nconst logo = document.querySelector('.header__logo');\n\nlet currentPage = sessionStorage.getItem('currentNumPage')\n  ? JSON.parse(sessionStorage.getItem('currentNumPage'))\n  : 1;\nlet query = sessionStorage.getItem('currentSerch')\n  ? JSON.parse(sessionStorage.getItem('currentSerch'))\n  : '';\n\ndocument.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.search.value;\n  addToLocalStorage(searchMovie, fetchGenres, 1, query);\n}\n\nif (!query) {\n  addToLocalStorage(fetchPopular, fetchGenres, currentPage);\n} else {\n  addToLocalStorage(searchMovie, fetchGenres, currentPage, query);\n}\n\nlist.addEventListener('click', clickHeroCard);\n\nfunction clickHeroCard(evt) {\n  renderModal(evt, 'currentPage');\n}\n\nbtnList.addEventListener('click', onClick);\n\nfunction onClick(evt) {\n  if (evt.target.nodeName === 'BUTTON') {\n    toTopOnClick();\n    currentPage = sessionStorage.getItem('currentNumPage')\n      ? JSON.parse(sessionStorage.getItem('currentNumPage'))\n      : 1;\n    query = sessionStorage.getItem('currentSerch')\n      ? JSON.parse(sessionStorage.getItem('currentSerch'))\n      : '';\n    currentPage = clickCounter(evt, currentPage);\n    if (!query) {\n      addToLocalStorage(fetchPopular, fetchGenres, currentPage);\n    } else {\n      addToLocalStorage(searchMovie, fetchGenres, currentPage, query);\n    }\n  }\n}\n\n// -----GoHome\nlogo.addEventListener('click', goHome);\n\nfunction goHome() {\n  console.log(123);\n  query = '';\n  currentPage = 1;\n  addToLocalStorage(fetchPopular, fetchGenres, currentPage);\n}\n","const API_KEY = '74df5c4b3da0f8bb23d044877e91bb86';\nconst API_URL_TRENDING = 'https://api.themoviedb.org/3/trending/';\nconst MEDIA_TYPE = 'movie';\nconst TIME_WINDOW = 'day';\n// let page = 1;\n\nfunction fetchPopular(page = 1) {\n  return fetch(\n    `${API_URL_TRENDING}${MEDIA_TYPE}/${TIME_WINDOW}?api_key=${API_KEY}&page=${page}`\n  ).then(response => {\n    return response.json();\n  });\n}\n\n// Функция добавляет популярные фильмы  в локальное хранилище\n\n// function addPopularToLocalStorage(){\n//   fetchPopular().then(data => {\n//     localStorage.setItem('popular', JSON.stringify(data));\n//   });\n// }\n\nexport { fetchPopular };\n","\n\nasync function fetchGenres() {\n    return await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=74df5c4b3da0f8bb23d044877e91bb86&language=en-US`).then(response => {\n        return response.json();\n    });\n}\n\n// Функция добавляет жанры в локальное хранилище\n// fetchGenres().then(data => {\n//     localStorage.setItem('genres', JSON.stringify(data));\n//   });\n\n//Переменная хранит в себе жанры из локального хранилища\n// const genresArray = JSON.parse(localStorage.getItem('genres'));\n\n\nexport { fetchGenres } ","const API_KEY = '74df5c4b3da0f8bb23d044877e91bb86';\nconst BASE_URL = 'https://api.themoviedb.org/3/search/movie?';\nconst LANG = 'en-US';\n// const PAGE = 1;\n\nasync function searchMovie(page = 1, query) {\n  return await fetch(\n    `${BASE_URL}query=${query}&api_key=${API_KEY}&language=${LANG}&page=${page}`\n  ).then(response => {\n    return response.json().catch(error => {\n      console.log(error);\n    });\n  });\n}\n\nexport { searchMovie };\n","import { renderMovieCard } from './renderMovieCard';\nimport { counter } from './btn-pag';\n\nconst list = document.querySelector('.gallery__list');\nconst warning = document.querySelector('.warning');\n\nfunction addToLocalStorage(fetch, fetchGenres, page, movie = '') {\n  sessionStorage.setItem('currentNumPage', JSON.stringify(page));\n  sessionStorage.setItem('currentSerch', JSON.stringify(movie));\n  fetch(page, movie).then(cards => {\n    // console.log(cards.total_pages);\n    fetchGenres().then(data => {\n      const cardGanr = cards.results;\n      cards.results.forEach((card, ind) => {\n        card.genre_ids.forEach((id, indx) => {\n          data.genres.forEach(el => {\n            if (el.id === id) {\n              cardGanr[ind].genre_ids[indx] = el.name;\n            }\n          });\n        });\n      });\n\n      counter(cards.total_pages, page);\n\n      localStorage.setItem('currentPage', JSON.stringify(cardGanr));\n      if (cardGanr.length === 0) {\n        warning.classList.remove('hidden');\n        form.reset();\n      } else {\n        warning.classList.add('hidden');\n        const markup = renderMovieCard(cardGanr);\n        list.innerHTML = markup;\n      }\n    });\n  });\n}\n\nexport { addToLocalStorage };\n"],"names":["parcelRequire","$4a801e192cbb1f8b$export$16bf2264c00353d2","page","fetch","then","response","json","async","$5844b68ee09a1fe1$export$e95d448b93b2cdb","$9488da62bf55fdf0$export$dd14e5c8db127693","query","catch","error","console","log","$iJbGQ","$39609341b24e273a$var$list","document","querySelector","$39609341b24e273a$var$warning","$39609341b24e273a$export$b4aebac53294aa19","fetchGenres","movie","sessionStorage","setItem","JSON","stringify","cards","data","cardGanr","results","forEach","card","ind","genre_ids","id","indx","genres","el","name","$iwBr5","counter","total_pages","localStorage","length","classList","remove","form","reset","add","markup","renderMovieCard","innerHTML","$1f0dc3b9307be026$var$btnList","$1f0dc3b9307be026$var$list","$1f0dc3b9307be026$var$logo","$1f0dc3b9307be026$var$currentPage","getItem","parse","$1f0dc3b9307be026$var$query","addEventListener","e","preventDefault","target","search","value","evt","$bTcpz","renderModal","nodeName","$74Aiq","toTopOnClick","clickCounter"],"version":3,"file":"index.122860dd.js.map"}