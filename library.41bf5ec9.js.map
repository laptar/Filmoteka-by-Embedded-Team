{"mappings":"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","sources":["src/js/modal.js","src/js/renderMovieCard.js"],"sourcesContent":["import { renderMovieCard } from './renderMovieCard';\nconst libList = document.querySelector('.gallery-library__list');\nconst homeList = document.querySelector('.gallery__list');\n\nfunction renderModal(event, nameStor) {\n  const refs = {\n    openModalBtn: document.querySelector('[data-modal-open]'),\n    modal: document.querySelector('[data-modal]'),\n    info: document.querySelector('.modal'),\n    body: document.querySelector('body'),\n  };\n  refs.body.classList.add('body-fixed');\n\n  if (event.target.nodeName === 'IMG') {\n    const arr = JSON.parse(localStorage.getItem(nameStor));\n    const currentMovie = arr.find(\n      curentId => String(curentId.id) === event.target.id\n    );\n\n    // Додаємо дві змінні 2 обєкта які беремо із локал сторадж, потім кожен розпрсимо, і кожен файндом перебиремо, якщо фільм доданий то в шаблонку вставляємо тернарнік, і міняємо ADD /remuv\n    let watched = localStorage.getItem('watched')\n      ? JSON.parse(localStorage.getItem('watched'))\n      : [];\n\n    let queue = localStorage.getItem('queue')\n      ? JSON.parse(localStorage.getItem('queue'))\n      : [];\n\n    const isInWatched = watched.some(\n      item => String(item.id) === event.target.id\n    );\n    const isInQueue = queue.some(item => String(item.id) === event.target.id);\n\n    const modalRender = `\n      <button type=\"button\" class=\"modal__button-close\" data-modal-close></button>\n    <div >\n      <img class=\"modal__image\"\n        src = \"https://image.tmdb.org/t/p/w500/${currentMovie.poster_path}\"\n        alt=\"${currentMovie.title}\"\n           />\n    </div>\n    <div class=\"modal-info\">\n      <h1 class=\"modal__title\">${currentMovie.title}</h1>\n      <table class=\"modale_table\">\n        <tbody class=\"modale_table\">\n          <tr class=\"modale_table-row\">\n            <td class=\"modale__table-name\">Vote/Votes</td>\n            <td class=\"modale__table-about\">\n              <span class=\"vote\">${currentMovie.vote_average}</span>\n              <span class=\"modale__table-name\">/</span>${\n                currentMovie.vote_count\n              }\n            </td>\n          </tr>\n          <tr class=\"modale__table-row\">\n            <td class=\"modale__table-name\">Popularity</td>\n            <td class=\"modale__table-about\">${currentMovie.popularity}\n            </td>\n          </tr>\n          <tr class=\"modale__table-row\">\n            <td class=\"modale__table-name\">Original Title</td>\n            <td class=\"modale__table-about\">${currentMovie.title}</td>\n          </tr>\n          <tr class=\"modale__table-row\">\n            <td class=\"modale__table-name\">Genre</td>\n            <td class=\"modale__table-about\">${currentMovie.genre_ids.join(\n              ', '\n            )}</td>\n          </tr>\n        </tbody>\n      </table>\n      <h2 class=\"modal__about-title\">About</h2>\n      <p class=\"modal__about-text\">${currentMovie.overview}</p>\n      <ul class=\"buttons\">\n        <button\n          type=\"button\"\n          class=\"modal__button-watched modal__button-text ${\n            isInWatched ? 'accent' : ''\n          }\"\n        >${isInWatched ? 'REMUVE WATCH' : 'add to watched'}\n          \n        </button>\n        <button \n          type=\"button\"\n            class=\"modal__button-queue modal__button-text ${\n              isInQueue ? 'accent' : ''\n            }\"\n        >${isInQueue ? 'REMUVE QUEUE' : 'add to queue'}\n          \n        </button>\n      </ul>\n    </div>`;\n    refs.info.insertAdjacentHTML('beforeend', modalRender);\n    refs.modal.classList.remove('is-hidden');\n\n    const closeModalBtn = document.querySelector('[data-modal-close]');\n    // console.log(closeModalBtn);\n    closeModalBtn.addEventListener('click', toggleModal);\n    // Змінні кнопок модалки\n    const watchedBtn = document.querySelector('.modal__button-watched');\n    const queueBtn = document.querySelector('.modal__button-queue');\n    // Провірка чи є щось в локал сторедж\n    //----\n    // Кнопка додавання та видалення з вотч\n    watchedBtn.addEventListener('click', clickWatch);\n    function clickWatch() {\n      const idInW = String(watched.map(el => el.id));\n      if (idInW.includes(event.target.id)) {\n        watched = watched.filter(el => String(el.id) !== event.target.id);\n        localStorage.setItem('watched', JSON.stringify(watched));\n        cangeNameAddWatch();\n      } else {\n        if (!watched.find(item => item.id === currentMovie.id)) {\n          watched.push(currentMovie);\n          localStorage.setItem('watched', JSON.stringify(watched));\n          cangeNameRemWatch();\n        }\n      }\n    }\n    // -------\n\n    // const idInW = String(watched.map(el => el.id));\n    // if (idInW.includes(event.target.id)) {\n    //   console.log(event.target.id);\n    //   watchedBtn.addEventListener('click', remuveWatch);\n    //   function remuveWatch() {\n    //     watched = watched.filter(el => String(el.id) !== event.target.id);\n    //     localStorage.setItem('watched', JSON.stringify(watched));\n    //     // libList.innerHTML = renderMovieCard(watched);\n    //     // toggleModal();\n    //     cangeNameAddWatch();\n    //   }\n    // } else {\n    //   watchedBtn.addEventListener('click', addToWatchList);\n    //   function addToWatchList() {\n    //     if (!watched.find(item => item.id === currentMovie.id)) {\n    //       watched.push(currentMovie);\n    //       localStorage.setItem('watched', JSON.stringify(watched));\n    //       // libList.innerHTML = renderMovieCard(watched);\n    //       // toggleModal();\n    //       cangeNameRemWatch();\n    //     }\n    //   }\n    // }\n    // ----\n    // Кнопка додавання та видалення з кювеє\n    queueBtn.addEventListener('click', clickQueue);\n    function clickQueue() {\n      const idInQ = String(queue.map(el => el.id));\n      if (idInQ.includes(event.target.id)) {\n        queue = queue.filter(el => String(el.id) !== event.target.id);\n        localStorage.setItem('queue', JSON.stringify(queue));\n        cangeNameAddQueue();\n      } else {\n        if (!queue.find(item => item.id === currentMovie.id)) {\n          queue.push(currentMovie);\n          localStorage.setItem('queue', JSON.stringify(queue));\n          cangeNameRemQueue();\n        }\n      }\n    }\n\n    // ---\n\n    // const idInQ = String(queue.map(el => el.id));\n    // console.log(idInQ);\n    // if (idInQ.includes(event.target.id)) {\n    //   queueBtn.addEventListener('click', remuveQueue);\n    //   function remuveQueue() {\n    //     queue = queue.filter(el => String(el.id) !== event.target.id);\n    //     localStorage.setItem('queue', JSON.stringify(queue));\n    //     // libList.innerHTML = renderMovieCard(queue);\n    //     // toggleModal();\n    //     cangeNameAddQueue();\n    //   }\n    // } else {\n    //   queueBtn.addEventListener('click', addToQueueList);\n    //   function addToQueueList() {\n    //     if (!queue.find(item => item.id === currentMovie.id)) {\n    //       queue.push(currentMovie);\n    //       localStorage.setItem('queue', JSON.stringify(queue));\n    //       // libList.innerHTML = renderMovieCard(queue);\n    //       // toggleModal();\n    //       cangeNameRemQueue();\n    //     }\n    //   }\n    // }\n\n    // ----\n    document.addEventListener('keydown', ev => {\n      if (ev.key === 'Escape') {\n        renderAfterAdd();\n        refs.body.classList.remove('body-fixed');\n        refs.modal.classList.add('is-hidden');\n        refs.info.innerHTML = '';\n      }\n    });\n    refs.modal.addEventListener('mousedown', evt => {\n      renderAfterAdd();\n      refs.body.classList.remove('body-fixed');\n      if (evt.target.nodeName === 'SECTION') {\n        refs.modal.classList.add('is-hidden');\n        refs.info.innerHTML = '';\n      }\n    });\n\n    // ==================\n\n    function cangeNameRemWatch() {\n      // console.log('міняю');\n      watchedBtn.textContent = 'REMUVE WATCH';\n      // watchedBtn.classList.add('disable');\n      watchedBtn.classList.add('accent');\n\n      // watchedBtn.disabled = true;\n    }\n    function cangeNameRemQueue() {\n      // console.log('міняюQue');\n      queueBtn.textContent = 'REMUVE QUEUE';\n      // queueBtn.classList.add('disable');\n      queueBtn.classList.add('accent');\n\n      // queueBtn.disabled = true;\n    }\n    function cangeNameAddQueue() {\n      // console.log('міняюADDQue');\n      queueBtn.textContent = 'ADD TO QUEUE';\n      queueBtn.classList.remove('accent');\n      // queueBtn.disabled = true;\n    }\n    function cangeNameAddWatch() {\n      // console.log('міняюADDQue');\n      watchedBtn.textContent = 'ADD TO WATCHED';\n      watchedBtn.classList.remove('accent');\n      // watchedBtn.disabled = true;\n    }\n  }\n\n  // ==========\n  function addArrToLocalStor(key) {\n    return localStorage.getItem(key)\n      ? JSON.parse(localStorage.getItem(key))\n      : [];\n  }\n  function renderAfterAdd() {\n    let currentList = sessionStorage.getItem('currentList')\n      ? JSON.parse(sessionStorage.getItem('currentList'))\n      : 'watched';\n    if (!libList) {\n      console.log('ia tut');\n      const currentPage = addArrToLocalStor('currentPage');\n      homeList.innerHTML = renderMovieCard(currentPage);\n      return;\n    }\n    if (currentList === 'watched') {\n      const watchedArr = addArrToLocalStor('watched');\n      libList.innerHTML = renderMovieCard(watchedArr);\n    } else {\n      const queueArr = addArrToLocalStor('queue');\n      libList.innerHTML = renderMovieCard(queueArr);\n    }\n  }\n  function toggleModal() {\n    console.log('close');\n    renderAfterAdd();\n    refs.body.classList.remove('body-fixed');\n    refs.modal.classList.add('is-hidden');\n    refs.info.innerHTML = '';\n  }\n}\n\nexport { renderModal };\n","function findInLocStor(id, localStor) {\n  const watchStor = localStorage.getItem(localStor)\n    ? JSON.parse(localStorage.getItem(localStor))\n    : false;\n  if (!watchStor) {\n    return watchStor;\n  } else {\n    return watchStor.find(elm => elm.id === id);\n  }\n}\n\nfunction renderMovieCard(array) {\n  if (array.length === 0) {\n    return '<img class=\"gallery\" src=\"https://c.tenor.com/KOZLvzU0o4kAAAAC/no-results.gif\" width=\"500px\" alt=\"\"/>';\n  }\n\n  const markup = array.map(movie => {\n    const releaseDate = movie.release_date.split('-')[0];\n    return `<li class=\"gallery__item\">\n                                <img class=\"gallery__image\" src=\"${\n                                  movie.poster_path\n                                    ? 'https://image.tmdb.org/t/p/w500/' +\n                                      movie.poster_path\n                                    : 'https://c.tenor.com/MaKLmuQyh0UAAAAC/vincent-vega-pulp-fiction.gif'\n                                }\" alt=\"${movie.title}\" id=\"${movie.id}\">\n        <div class=\"ico-watched ${\n          findInLocStor(movie.id, 'watched') ? '' : 'visually-hidden'\n        }\">\n          <img src=\"./images/watch.png\" alt=\"\" />\n          <p class=\"ico__text-watched\">ON WATCHED</p>\n        </div>\n        <div class=\"ico-queue ${\n          findInLocStor(movie.id, 'queue') ? '' : 'visually-hidden'\n        }\">\n          <img src=\"./images/queue.svg\" alt=\"\" />\n          <p class=\"ico__text-queue\">ON QUEUE</p>\n        </div>\n                                <div class=\"gallery__wrapper\">\n                                <h3 class=\"gallery__film-title\">${\n                                  movie.title\n                                }</h3>\n                                <p class=\"gallery__film-genres\">${\n                                  movie.genre_ids.length >= 3\n                                    ? movie.genre_ids.slice(0, 2).join(', ') +\n                                      ', Others...'\n                                    : movie.genre_ids.join(', ')\n                                    ? movie.genre_ids.join(', ')\n                                    : 'NO DATA'\n                                }\n                                \n\n\n\n                                <span class=\"gallery__film-year\">| ${releaseDate}</span></p></div>\n                        </li>`;\n  });\n\n  return markup.join('');\n}\n\nexport { renderMovieCard };\n"],"names":["$iJbGQ","parcelRequire","$8a7e756c566dd1ea$var$libList","document","querySelector","$8a7e756c566dd1ea$var$homeList","$8a7e756c566dd1ea$export$69bf191433722f78","event","nameStor","refs","openModalBtn","modal","info","body","classList","add","target","nodeName","currentMovie","JSON","parse","localStorage","getItem","find","curentId","String","id","watched","queue","isInWatched","some","item","isInQueue","modalRender","poster_path","title","vote_average","vote_count","popularity","genre_ids","join","overview","insertAdjacentHTML","remove","addEventListener","console","log","renderAfterAdd","innerHTML","watchedBtn","queueBtn","map","el","includes","filter","setItem","stringify","textContent","push","ev","key","evt","addArrToLocalStor","currentList","sessionStorage","watchedArr","renderMovieCard","queueArr","currentPage","$0384bbdc6bba0e8b$var$findInLocStor","localStor","watchStor","elm","$0384bbdc6bba0e8b$export$605b145a07818080","array","length","movie","releaseDate","release_date","split","slice"],"version":3,"file":"library.41bf5ec9.js.map"}